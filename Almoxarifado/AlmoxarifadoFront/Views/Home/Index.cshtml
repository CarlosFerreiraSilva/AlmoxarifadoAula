@{
    ViewData["Title"] = "Home Page";
}

<table class="table">
    <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Descrição</th>
        </tr>
    </thead>
    <tbody id="table">
    </tbody>
</table>

<input class="form-control mt-3" id="MotDescricao" />
<input class="form-control mt-3" id="CatIdMotivo" />

<button onclick="nbvbjkvkgvvgubjl()">
    Teste
</button>

<script>
    function teste(){
          var url = window.location.href + "Motivo"
          var Table = document.getElementById('table')
        Table.innerHTML =""
            fetch(url)
  .then(response => {
    return response.json();
  })
  .then(data => {
    console.log(data)
    data.forEach((element) => {
        Table.innerHTML += `
        <tr>
            <th scope="row">${element.motDescricao}</th>
            <td scope="row">${element.catId}</th>
        </tr>
        `
    })
  });
    }
    teste()


    
</script>

<script>
    function nbvbjkvkgvvgubjl() {
        var url = window.location.href + "Motivo/Create"
        var motivoDescricao = document.getElementById("MotDescricao").value
        var CatIdMotivo = document.getElementById("CatIdMotivo").value

        if (motivoDescricao == "" || CatIdMotivo == "" || parseInt(CatIdMotivo) == Number) {
            alert("Campos Vazio Verifique")
            return
        }

        const data = {
            motDescricao: motivoDescricao,
            catId: CatIdMotivo,
        }

        const option = {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        };

        fetch(url, option)
            .then(response => {
                if (!response.ok){
                    throw new Error('Erro ao enviar dados');
                }
                return response.json();
            })
            .then(data => {
                console.log('Dados recebidos:', data)
                teste()
            })
            .catch(error => {
                console.error("Erro:", error)
            });
    }
</script>

        